<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"> </script>
</head>
<body>
  City: <input id ="city" value= ""> </input>
  <br/>
  Word: <input id ="word" value= ""> </input>
  <ul>
  </ul>
<div>
  </div>
  <div id="one"></div>
  <div id="two"></div>

<script>

let li = document.querySelector('ul');

//api variables
var api = "https://www.dictionaryapi.com/api/v3/references/thesaurus/json/";
var apikey = "?key=8fbd1884-fce0-4403-84f4-cfa7a583a853";
var weatherApi = "http://api.openweathermap.org/data/2.5/weather?q=";
var weatherApiKey = "&APPID=7c3fc534569d881011be27bc1d530450&units=imperial";

//html variables
var cityInput = document.querySelector('#city');
var wordInput = document.querySelector('#word');
var wordButton = document.querySelector('#word');
let divvar = document.querySelector("div");
let divvar_one = document.querySelector('#one');
let divvar_two = document.querySelector('#two');


async function userThesaurus(){
try {   //city spelling error
  //arrays and word banks
  let startarr = [' my dear ', ' to love you ', ' I am free (gone?)'];
  let newarr = [];
  let bank = ['Athena ', 'Aphrodite ', 'Hera ', 'Virginia '];
  let bankWordOne = bank[Math.floor(Math.random()*4)];
  let bankWordTwo = bank[Math.floor(Math.random()*4)];
  let patinaCode = 637;

  var urlWord = api + wordInput.value + apikey;
  var urlTemp = weatherApi + cityInput.value + weatherApiKey;



    let userTemp = await jQuery.get(urlTemp,
      (user) => {console.log(JSON.stringify(user))
                let promiseArray = user.main.temp;
                console.log(promiseArray)



    let tempTwo =  jQuery.get("http://api.openweathermap.org/data/2.5/weather?zip=21231&APPID=7c3fc534569d881011be27bc1d530450&units=imperial",
        (baltimore) => {console.log(baltimore.main.temp)

    let tempThree =  jQuery.get("http://api.openweathermap.org/data/2.5/weather?zip=08540&APPID=7c3fc534569d881011be27bc1d530450&units=imperial",
        (princeton) => {console.log(princeton.main.temp)


    if (baltimore.main.temp > user.main.temp) {
        console.log("balty>user");
        newarr.push(startarr[2]);
        startarr.splice([2],1);

      } else if (baltimore.main.temp < princeton.main.temp){
        console.log("balty<princeton")
        newarr.push(startarr[0]);
        startarr.splice([0],1);

      } else {
        console.log("whoa daddy")
        newarr.push(startarr[1]);
        startarr.splice([1],1);
    }
  });
  });
  });

  function assemblerTwo (){

    function synCode(arr){
      let sum = 0;
    for (i=0; i < arr.length; i++){
      sum += arr.charCodeAt(i);
      }
    console.log(sum)
      return sum
    }
try{  ////word spelling error
    let userWord = jQuery.get(urlWord,
      (info) => {

        console.log(JSON.stringify(info));
        if (info[0].meta == undefined){
          alert("Word field spelling error"), console.error("Word field mispelled")
        }
        console.log(info[0].meta.syns);

        let promiseArray = info[0].meta.syns;
        let synArray = promiseArray[0];
        let randomSyn = synArray[Math.floor(Math.random()*promiseArray[0].length)]
        console.log(promiseArray[0].length);


    if (patinaCode > synCode(randomSyn)){
      console.log(true + " patina>syn")
      console.log(patinaCode + synCode(randomSyn))
      console.log(randomSyn)
      newarr.push(startarr[1]);
      startarr.splice([1],1);


    } else {
      console.log(false + " patina<syn")
      console.log(patinaCode + synCode(randomSyn))
      console.log(randomSyn)
      newarr.push(startarr[0]);
      startarr.splice([0],1);
    }

      newarr.push(startarr[0]);
      startarr.splice([0],1);
      //newarr.unshift(bankWordOne);
      divvar.innerHTML = bankWordOne;
      divvar_one.innerHTML = newarr[0];
      divvar_two.innerHTML = newarr[1] + newarr[2];
    ////////////////////////////////////
  })
}catch {alert("thes spell")}

}


    assemblerTwo();
  } catch {console.error("City field spelling error"), alert("City field spelling error")}//try
}



</script>

<button id="word" onclick="userThesaurus()">Patina</button>

</body>
</html>
